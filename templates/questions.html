{% extends 'base.html' %}

{% block content %}
<div class="questions">
    <form action="/process" method=post enctype=multipart/form-data>
        <div class="mb-3">
            <p>
                <input type="checkbox" id="toggleSupression" onclick="enableFieldList('toggleSupression')">
                <b>Supressão de Valor</b>
            </p>
            <div class="valueSupressionRow" id="supressionInput">
                <input type="text" class="form-control" id="suppressedValue" name="suppressedValue" disabled>
            </div>
        </div>
        <div class="mb-3">
            <div class="row">
                <p>
                    <input type="checkbox" id="toggleGeneralization" onclick="enableFieldList('toggleGeneralization')">
                    <b>Generalização de sub-árvore</b>
                </p>
                <div id="generalizationInput">
                    <label for="selectColumns" class="form-label">Campo</label>
                    <select class="form-select" id="selectColumns" disabled>
                        {% for column in columns %}
                        <option>{{column}}</option>
                        {% endfor %}
                    </select><br>
                    <div class="text-center">
                        <div class="row justify-content-md-center">
                            <div class="col-md-auto">
                                <label for="suppressedValue" class="form-label">Sub-Árvore</label>
                                <input type="text" class="form-control" id="suppressedValue" disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <label for="suppressedValue" class="form-label"></label>
                                <input type="text" class="form-control" id="suppressedValue" disabled>
                            </div>
                            <div class="col">
                                <label for="suppressedValue" class="form-label"></label>
                                <input type="text" class="form-control" id="suppressedValue" disabled>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-3">
            <p>
                <input type="checkbox" id="toggleNoise" onclick="enableFieldList('toggleNoise')">
                <b>Adição de ruído e Geração de dados sintéticos</b>
            </p>
            <div class="row">
                <div class="col-11">
                    <div id="noiseInput">
                        <input type="range" class="form-range" id="customRange" name="amountRange"
                            oninput="this.form.amountInput.value=this.value" value="0" disabled>
                    </div>
                </div>
                <div class="col-1">
                    <input type="number" name="amountInput" value="0" oninput="this.form.amountRange.value=this.value"
                        id="outputRange" disabled />
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-center" id="buttonSubmit">
            <button type="submit" class="btn btn-primary" id="submitQuestions">Submeter</button>
        </div>
    </form>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
<script>
    function enableFieldList(checkBox) {
        var checkIdBoxSelector = '#' + checkBox
        var divCheckBoxIdSelector

        if (checkBox == 'toggleSupression') {
            divCheckBoxIdSelector = '#supressionInput :input'
        } else if (checkBox == 'toggleGeneralization') {
            divCheckBoxIdSelector = '#generalizationInput :input'
        } else if (checkBox == 'toggleNoise') {
            divCheckBoxIdSelector = '#noiseInput :input'
        }

        if ($(checkIdBoxSelector).is(':checked')) {
            $(divCheckBoxIdSelector).removeAttr('disabled');
        } else {
            $(divCheckBoxIdSelector).attr('disabled', true);
            idInputDiv = divCheckBoxIdSelector.split(" ")[0]
            if (idInputDiv == '#noiseInput') {
                $('#outputRange').val('0')
                $('#customRange').val('0')
            } else {
                $(idInputDiv + " input").each(function () {
                    this.value = "";
                })
            }
        }
    }
</script>
{% endblock %}